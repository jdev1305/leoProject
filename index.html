<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>R.H.V.Leonidas H13 - Goals Tracker 25/26</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  background: #121212;
  color: #e0e0e0;
}
h1 {
  text-align: center;
  margin-bottom: 40px;
}
.chart-container {
  display: flex;
  justify-content: center;
  margin-bottom: 50px;
}
canvas {
  max-width: 800px;
  width: 90%;
  height: 300px; /* middle size */
  background: #1e1e1e;
  padding: 15px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.week-header {
  margin-top: 30px;
  font-size: 1.2em;
  font-weight: bold;
  text-align: center;
  color: #ffffff;
}
table {
  width: 100%;
  max-width: 800px;
  margin: 10px auto;
  border-collapse: collapse;
  background: #1e1e1e;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}
th, td {
  border-bottom: 1px solid #333;
  padding: 10px;
  text-align: center;
  color: #e0e0e0;
}
th {
  background: #007bff;
  color: #fff;
}
table tr:nth-child(even) { background: #2a2a2a; }
table tr:hover { background: #333; }

/* Responsive adjustments */
@media(max-width: 600px){
  canvas { 
    width: 100%; 
    height: 250px; /* slightly smaller on mobile */
  }
  table { display:block; overflow-x:auto; }
}
</style>
</head>
<body>
<h1>R.H.V.Leonidas H13 - Goals Tracker 25/26</h1>

<div class="chart-container">
  <canvas id="totalGoalsChart"></canvas>
</div>

<div id="results"></div>

<script>
// ========= EDIT THIS DATA =========
const data = {
  "Week 1": {},
  "Week 2": {"Mees":1},
  "Week 3": {},
  "Week 4": {"Ernst":1,"Jacob":1,"Merijn":1}
};
// ==================================

const resultsDiv = document.getElementById("results");

// Render weekly tables
function renderTables() {
  resultsDiv.innerHTML = "";
  for (const week in data) {
    const weekData = data[week];
    let tableHTML = `<div class="week-header">${week}</div><table><tr><th>Player</th><th>Goals</th></tr>`;
    for (const player in weekData) {
      tableHTML += `<tr><td>${player}</td><td>${weekData[player]}</td></tr>`;
    }
    tableHTML += "</table>";
    resultsDiv.innerHTML += tableHTML;
  }
}

// Generate dynamic colors for bars
function getColor(index) {
  const colors = ["#4BC0C0","#FF6384","#FFCE56","#36A2EB","#9966FF","#FF9F40"];
  return colors[index % colors.length];
}

// Render horizontal total goals chart sorted highest to lowest
function renderTotalGoalsChart() {
  const totals = {};
  for (const week in data) {
    for (const player in data[week]) {
      totals[player] = (totals[player] || 0) + data[week][player];
    }
  }

  // Sort descending
  const sortedTotals = Object.entries(totals).sort((a,b) => b[1]-a[1]);
  const labels = sortedTotals.map(entry => entry[0]);
  const values = sortedTotals.map(entry => entry[1]);

  const ctx = document.getElementById("totalGoalsChart").getContext("2d");

  new Chart(ctx, {
    type: "bar",
    data: {
      labels: labels,
      datasets: [{
        label: "Total Goals",
        data: values,
        backgroundColor: labels.map((_, i) => getColor(i)),
        borderRadius: 10,
        barThickness: 30,
        hoverBackgroundColor: "#FFD700" // bright gold on hover
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          bodyFont: { size: 16 },
          titleFont: { size: 16, weight: 'bold' },
          padding: 12,
          backgroundColor: '#333',
          titleColor: '#fff',
          bodyColor: '#fff',
          callbacks: {
            label: function(context) {
              return `${context.label}: ${context.parsed.x} goal${context.parsed.x !== 1 ? 's' : ''}`;
            }
          }
        }
      },
      scales: {
        x: {
          beginAtZero: true,
          stepSize: 1,
          ticks: {
            color: '#e0e0e0',
            callback: function(value) {
              return Number.isInteger(value) ? value : null;
            },
            precision: 0
          },
          grid: { color: "#333" }
        },
        y: {
          grid: { color: "#333" },
          ticks: { 
            font: { weight: 'bold', size: 22 },
            color: '#ffffff'
          }
        }
      }
    }
  });
}

// Initialize chart and tables
document.addEventListener("DOMContentLoaded", () => {
  renderTotalGoalsChart();
  renderTables();
});
</script>
</body>
</html>
